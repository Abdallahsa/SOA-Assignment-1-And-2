<!DocType html>
<html xmlns:th="http://www.thymeleaf.org">
	<head>
		<title>All students</title>
		<link rel="stylesheet" href="searchName.css">
		<Script>
	 window.onload = function () 
		{
			// Make an AJAX request to your API endpoint
	        var xhr = new XMLHttpRequest();
	        xhr.open("GET", "/students/allStudents", true);
	        xhr.onreadystatechange = function () {
	            if (xhr.readyState === 4) {
	                if (xhr.status === 200) {
	                    // Handle the response, e.g., display the search results
	                    displaySearchResults(JSON.parse(xhr.responseText));
	                } else {
	                    // Handle errors
	                    alert("Error: " + xhr.statusText);
	                }
	            }
	        };
	        xhr.send();
		}
		
		 function displaySearchResults(results) {
		        var resultsDiv = document.getElementById("result");
		        resultsDiv.innerHTML = ""; // Clear previous results

		        if (results.length === 0) {
		            resultsDiv.innerHTML = "No students found.";
		            return;
		        }

		        var table = document.createElement("table");
		        table.border = "1";

		        // Create table headers
		        var headerRow = table.insertRow(0);
		        for (var key in results[0]) {
		            var headerCell = headerRow.insertCell();
		            headerCell.innerHTML = key;
		        }

		        // Fill in table data
		        for (var i = 0; i < results.length; i++) {
		            var row = table.insertRow();
		            for (var key in results[i]) {
		                var cell = row.insertCell();
		                cell.innerHTML = results[i][key];
		            }
		        }

		        resultsDiv.appendChild(table);
		    }
	</Script>
	</head>
	<body>
		<h1>All Students</h1>
		<div id=result></div>
<!-- 
    	<table border="1">
       	 	<thead>
            	<tr>
                	<th>ID</th>
                	<th>First Name</th>
                	<th>Last Name</th>
                	<th>Gender</th>
                	<th>GPA</th>
                	<th>Level</th>
                	<th>Address</th>
            	</tr>
        	</thead>
        	<tbody>
            	<tr th:each="student : ${students}">
                	<td th:text="${student.id}"></td>
                	<td th:text="${student.firstName}"></td>
                	<td th:text="${student.lastName}"></td>
                	<td th:text="${student.gender}"></td>
                	<td th:text="${student.gpa}"></td>
                 	<td th:text="${student.level}"></td>
                	<td th:text="${student.address}"></td>
            	</tr>
        	</tbody>
    	</table>
    	 -->
	</body>
</html>
	